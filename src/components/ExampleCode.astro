---
import * as fs from 'node:fs';
import { Code } from 'astro/components';

export interface Props {
  path: string;
  label: string;
}

const dir = 'flutter/examples/lib/examples/';
const { path, label } = Astro.props;
let code = fs.readFileSync(`${dir}${path}`, 'utf8');
if (label) {
  code = code
    .replace(new RegExp(`[\\s\\S]*<${label}>.*$`, 'm'), '')
    .replace(new RegExp(`^.*</${label}>[\\s\\S]*`, 'm'), '')
    .trim();
}
---

<div class="bg-secondary-subtle px-3 py-1">
  <a
    href={`https://github.com/tnantoka/flame.tnantoka.com/tree/main/${dir}${path}`}
    class="text-decoration-none text-reset">{path}</a
  >
</div>
<Code code={code} lang="dart" />
