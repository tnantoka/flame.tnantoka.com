---
title: ジョイスティック
id: 7
date: 2023-05-02
---

import ExampleCode from '../../components/ExampleCode.astro';
import DocLink from '../../components/DocLink.astro';

## JoystickComponent

`JoystickComponent`を使うと画面上にバーチャルスティックを簡単に表示することができます。

`knob`でスティック部分、`background`で背景を指定します。
位置は`margin`か`position`で調整します。

<DocLink document="https://docs.flame-engine.org/latest/flame/inputs/other_inputs.html#joystick" />
<DocLink reference="https://pub.dev/documentation/flame/latest/input/JoystickComponent-class.html" />

## 四角形を操作する

それではやってみます。

まずはメンバーを用意します。

<ExampleCode file="joystick/game.dart" label="joystick1" />

次に四角形を初期化します。

<ExampleCode file="joystick/game.dart" label="joystick2" />

ジョイスティックの初期化をすれば準備は終わりです。

<ExampleCode file="joystick/game.dart" label="joystick3" />

後は`update`で値を読み取り、Rect の位置に反映させます。

ここでは`delta`で得られる Vector2 をそのまま利用しています。  
`delta`は傾きに応じた値（0〜± ジョイスティックのサイズ）が返ってくるので、これを速度として使うと傾きによって動く速さが変わります。  
それを避けたい場合は`delta`の値を見て処理するか、代わりに`direction`で取れる向きを使うなどの対応が必要になります。

<ExampleCode file="joystick/game.dart" label="joystick4" />

これでコンポーネントを動かせるようになりました。
